function asyncGeneratorStep(t,e,a,n,r,o,p){try{var s=t[o](p),i=s.value}catch(t){return void a(t)}s.done?e(i):Promise.resolve(i).then(n,r)}function _asyncToGenerator(t){return function(){var e=this,a=arguments;return new Promise(function(n,r){var o=t.apply(e,a);function p(t){asyncGeneratorStep(o,n,r,p,s,"next",t)}function s(t){asyncGeneratorStep(o,n,r,p,s,"throw",t)}p(void 0)})}}!function(t,e,a){e(function(){var t=wppp_conv_data?wppp_conv_data.userId:"",n=(window.location.hostname,{});if(wppp_conv_data.posts)Object.keys(wppp_conv_data.posts).map(function(t){if(wppp_conv_data.posts[t]&&"1"==wppp_conv_data.posts[t].audio_status)wppp_conv_data.posts[t].trans_id&&"ArraybodytranscriptionId"!==wppp_conv_data.posts[t].trans_id?n[t]=wppp_conv_data.posts[t].trans_id:I(e("#post-"+t).find(".has_audio"),"No");else if(wppp_conv_data.posts[t]&&"3"==wppp_conv_data.posts[t].audio_status){R(e("#post-"+t).find(".has_audio"),t)}}),Object.keys(wppp_conv_data.posts).length>0&&o(n);else if(wppp_conv_data.post_id&&wppp_conv_data.post&&wppp_conv_data.post.trans_id&&"1"==wppp_conv_data.post.audio_status){n[wppp_conv_data.post_id]=wppp_conv_data.post.trans_id,(r=e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"))&&T(r),o(n,!0)}else if(wppp_conv_data.post_id&&wppp_conv_data.post&&wppp_conv_data.post.trans_id&&"2"==wppp_conv_data.post.audio_status){O(r=e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"))}else if(wppp_conv_data.post_id&&wppp_conv_data.post&&wppp_conv_data.post.trans_id&&"3"==wppp_conv_data.post.audio_status){A(r=e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"))}else if(wppp_conv_data.post_id&&wppp_conv_data.post&&!wppp_conv_data.post.trans_id||wppp_conv_data.post_id&&wppp_conv_data.post&&"ArraybodytranscriptionId"===wppp_conv_data.post.trans_id){var r;O(r=e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"),"This post does not have audio.")}function o(t,a){e.each(t,function(n,r){if(r){var o=firebase.database().ref("articles").child(r);o.on("value",function p(s){var i=s.val();if(i&&i.error){var c=a?e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"):e("#post-"+n).find(".has_audio");return a?A(c):R(c,t),e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"article_converted_failed",post_id:n}}),void o.off("value",p)}i&&i.transcriped&&void 0!==i.transcriptionUrl_mp3&&(o.off("value",p),window.wppp_conv_data&&(wppp_conv_data.post={article_audio:i.transcriptionUrl_mp3,audio_status:2,trans_id:r,voice:i.voice}),e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"article_converted_success",post_id:n,trans_id:r,audio_url:i.transcriptionUrl_mp3},success:function(t){var r=a?e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"):e("#post-"+n).find(".has_audio");a?(e("#podcast-meta-box-id .inside").html(t),O(e(".converting-msg-wrapper"))):(I(r),C(n,["edit","delete"]))},error:function(t){}}))})}})}function p(t){var a=t.postId,n=t.playArticleId,r=t.voice;return e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"save_draft",post_id:a,play_article_id:n,voice:r}})}function s(t){var a=t.postId;return e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"delete_draft",post_id:a}})}function i(t,e){return c.apply(this,arguments)}function c(){return(c=_asyncToGenerator(regeneratorRuntime.mark(function t(a,n){var r,o,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=null,p=localStorage.getItem("playht_auth_token"),r=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[n].trans_id:wppp_conv_data.post.trans_id,t.prev=3,t.next=6,e.ajax({type:"DELETE",url:"https://play.ht/api/articleInfo",data:{articleId:a,token:p,transcriptionId:r}});case 6:return o=t.sent,t.abrupt("return",o);case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0);case 13:case"end":return t.stop()}},t,null,[[3,10]])}))).apply(this,arguments)}function d(t){return l.apply(this,arguments)}function l(){return(l=_asyncToGenerator(regeneratorRuntime.mark(function t(a){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.postId,t.abrupt("return",e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"delete_article_audio",post_id:n}}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function u(t){var a=t.postId;return new Promise(function(t,n){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"retry_article_audio",post_id:a},success:function(e){var a=e.data.response;t(a)},error:function(t){n(t)}})})}function _(t){return e.ajax({type:"POST",url:wppp_conv_data.admin_url,dataType:"html",data:{action:"refresh_audio_menu",post_id:t},success:function(t){e("#podcast-meta-box-id .inside").html(t)},error:function(t){console.log("Error:",t)}})}function v(t){return new Promise(function(t,a){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"retrieve_default_voice"},success:function(e){e.success&&e.data.response?t(e.data.response):t(null)},error:function(a){t(e("#wppp_voice_meta option:selected").val())}})})}function h(t){return new Promise(function(a,n){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"retrieve_post_meta_data",post_id:t},success:function(t){t.success&&t.data.response?a(t.data.response):a(null)},error:function(t){console.log("getPostMetaData -> error",t),a(null)}})})}function f(t){var e=[];return function t(a){if(!a.childNodes)return null;Array.prototype.forEach.call(a.childNodes,function(a){if(3===a.nodeType){var n=a.nodeValue.trim();n.length>0&&e.push(n)}else t(a)})}(t),e.join(" ").replace(/\s+(\W)/g,"$1")}function w(t,a,n,r,o,p,s,i,c,d,l){var u={url:t,voice:a,appId:n,userId:r,title:i,image:c,author_name:o,author_image:p,published_date:s,ssml:d,publishStatus:l?"draft":"published"};return new Promise(function(a,n){e.ajax({type:"POST",url:"https://play.ht/api/setArticleInfo",data:JSON.stringify(u),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){e&&e.article?a(e.article.id):n("no articleInfo available for article: ",t)},error:function(t){n(t)}})})}function m(t,a,r,o,p,s,i,c){var d=wppp_conv_data.home_url+o;return new Promise(function(l,u){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"save_post_conversion_data",lang:a,post_id:o,article_fallback_url:d,play_article_id:p,globalSpeed:c,voice:t,ssml:JSON.stringify(s),narrationStyle:r,wordsCount:i},success:function(t){try{n[o]=JSON.parse(t.data.response.body).transcriptionId,l(t)}catch(t){u(t)}},error:function(t){u(t)}})})}function y(t){return new Promise(function(a,n){e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"get_post_content_data",post_id:t},success:function(t){try{a(t.data.response)}catch(t){n(t)}},error:function(t){n(t)}})})}function g(t){return new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t?firebase.database().ref("users").child(t).once("value",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.val()?a(e.val()):a({});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()):reject();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}function b(t){return new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t?firebase.database().ref("articleData").child(t).once("value",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.val()?a(e.val()):a({});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()):reject();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}function x(t,e){return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(n){var r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=4;break}firebase.database().ref("articlesContent").child(e).child("text").once("value",function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var o,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.val()){e.next=5;break}o=a.val().join("\n \n"),r=o.split("\n").filter(function(t){return t.trim()}).filter(Boolean),e.next=9;break;case 5:return e.next=7,y(t);case 7:p=e.sent,r=p.filter(function(t){return t.trim()}).filter(Boolean);case 9:n(r);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),a.next=9;break;case 4:return a.next=6,y(t);case 6:o=a.sent,r=o.filter(function(t){return t.trim()}).filter(Boolean),n(r);case 9:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}())}function k(t){return new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t?firebase.database().ref("articlesContent").child(t).child("ssml").once("value",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.val()&&(r=e.val().join("\n \n"),n=r.split("\n").filter(function(t){return t.trim()}).filter(Boolean)),a(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()):a(null);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}function S(t,e){var n=arguments.length>2&&arguments[2]!==a?arguments[2]:"",r=arguments.length>3&&arguments[3]!==a?arguments[3]:"";playht__swal.fire({imageUrl:wppp_images.settings,title:r||"Loading ...",text:n||"",showConfirmButton:!1,animation:!1})}function T(t,e){var a='<img class="loading" src="'+wppp_images.settings+'"><span class="converting-text">'+e+"</span>";t.html(a)}function C(t,a){var n=[],r=e("#post-"+t).find(".row-actions");r.find(".add_podcast, .edit_podcast, .delete_podcast, .playht-separator").remove();var o=-1===r.text().search(/(\s\|\s)+$/)?'<span class="playht-separator"> | </span>':"";a.includes("add")&&n.push('<span class="add_podcast playht-row-action"><a style="cursor:pointer;" id="playht-add-audio" data-postId="'+t+'">Add Audio</a></span>'),a.includes("edit")&&n.push('<span class="edit_podcast playht-row-action"><a style="cursor:pointer;" id="playht-edit-audio" data-postid="'+t+'">Regenerate Audio</a></span>'),a.includes("delete")&&n.push('<span class="delete_podcast playht-row-action"><a style="cursor:pointer;color:#b32d2e;" id="playht-delete-audio" data-postId="'+t+'">Delete Audio</a></span>'),e(r).append(o+n.join('<span class="playht-separator"> | </span>'))}function P(t,n){var r=arguments.length>2&&arguments[2]!==a?arguments[2]:null,o=arguments.length>3&&arguments[3]!==a?arguments[3]:null;null!==n&&function(){var t=arguments.length>0&&arguments[0]!==a?arguments[0]:null,n=arguments.length>1&&arguments[1]!==a?arguments[1]:null,r=e("#post-"+t).find(".has_audio");if(!n)return r.find(".playht-draft-actions").remove(),void r.find(".playht-converting").remove();var o='<span class="playht-draft-actions" style="display:block;"><a style="cursor:pointer;text-decoration: underline;" id="playht-edit-draft" data-postid="'+t+'" >Edit Draft</a> - <a style="cursor:pointer;text-decoration: underline; color: red;" id="playht-delete-draft" data-postId="'+t+'" >Delete Draft</a></span>';r.append(o)}(t,n),null!==r&&function(t,a){var n=e("#post-"+t).find(".playht-converting");if("Yes"!==a&&"No"!==a)return void n.remove();var r='<img src="'+("No"===a?wppp_images.no_audio:wppp_images.audio)+'" /><span>'+a+"</span>";n.html(r)}(t,r),null!==o&&C(t,o)}function I(t){var e=arguments.length>1&&arguments[1]!==a?arguments[1]:"Yes",n='<span class="playht-converting"><img src="'+("No"===e?wppp_images.no_audio:wppp_images.audio)+'" /><span>'+e+"</span></span>";t.html(n)}function R(t,e){var a='<div class="__play-tooltip-wide" data-tooltip="An error has happened, we have been informed and will fix it shortly. Please try converting other articles in the mean time." ><img src="'+wppp_images.audio_error+'" /><span>Error</span></div> <span class="retry_podcast"><a style="cursor:pointer;" id="playht-retry-audio" data-postid="'+e+'">Retry</a></span>';t.html(a)}function A(t){var e='<div class="__play-tooltip-wide" data-tooltip="An error has happened, we have been informed and will fix it shortly. Please try converting other articles in the mean time." ><img src="'+wppp_images.audio_error+'" style="width: 20px;"><span class="converting-text">Audio Conversion Error.</span></div>';t.html(e)}function O(t){var e=arguments.length>1&&arguments[1]!==a?arguments[1]:"This post has audio.",n='<img style="width: 20px;" src="'+("This post does not have audio."===e?wppp_images.no_audio:wppp_images.audio)+'" /><span class="converting-text">'+e+"</span>";t.html(n)}function B(t){var e=wppp_conv_data.current_credits?wppp_conv_data.current_credits.appsumo_words?Number(wppp_conv_data.current_credits.appsumo_words)+Number(wppp_conv_data.current_credits.words_count):Number(wppp_conv_data.current_credits.words_count):0;return Number(100)<=e}function j(t,a,n){if(t&&a){var r={userId:t,key:a,value:n};e.ajax({type:"POST",url:"https://play.ht/api/user-conf",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json"}),r.action="playht_set_user_data",e.post({url:ajaxurl,data:r})}}function E(t){return new Promise(function(e,a){t?firebase.database().ref("pronunciations").child(t).once("value",function(t){e(t.val())}):a()})}function D(t,a){if(t&&a){var n={userId:t,pronunciations:a};e.ajax({type:"POST",url:"https://play.ht/api/user-pronunciations",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json"})}}function G(a){var n=a.articleDataId,r=a.postId,o=a.narrationStyle,p=a.voice,s=a.title,i=a.postContent;return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(c,d){var l,u,_,v,h,f,m,y,S;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g(t);case 3:return l=a.sent,a.next=6,E(t);case 6:return u=a.sent,_=null,l&&l.conf&&(_=l.conf.pauses,v=l.conf.is_revision_mode_enabled),a.next=11,k(n);case 11:if(a.t0=a.sent,a.t0){a.next=14;break}a.t0=null;case 14:if(h=a.t0,f={},a.prev=16,!n){a.next=21;break}return a.next=20,b(n);case 20:f=a.sent;case 21:a.next=26;break;case 23:a.prev=23,a.t1=a.catch(16),console.log("openArticleEditor -> error",a.t1);case 26:if(!h){a.next=30;break}a.t2=null,a.next=36;break;case 30:if(a.t3=i,a.t3){a.next=35;break}return a.next=34,x(r,n);case 34:a.t3=a.sent;case 35:a.t2=a.t3;case 36:m=a.t2,y=document.createElement("div"),S=document.createElement("div"),y.id="playht-tts-editor-root",S.id="playht-tts-editor-item",y.appendChild(S),document.body.append(y),ReactDOM.render(React.createElement(PlayhtTTSEditor.PlayhtTTSEditor,{onConvert:function(t){t?(h=t.patches,p=t.voice,o=t.narrationStyle,wordsCount=t.wordsCount,audiospeed=t.globalSpeed,t?c({articleSSMLContent:h,voice:p,narrationStyle:o,wordsCount:wordsCount,isDraft:!1,audiospeed:audiospeed}):d(),y.remove(),t.errors&&t.errors.length):d()},onCancel:function(t){c({articleSSMLContent:h,voice:p,narrationStyle:o,wordsCount:0,isDraft:!0,audiospeed:0}),y.remove(),playht__swal.close()},onAutoSave:function(t){if(t){h=t.patches,p=t.voice,o=t.narrationStyle,wordsCount=t.wordsCount,audiospeed=t.globalSpeed;var e,a,n,s,i,c,l="",u="",_="",v="",f="";if(wppp_conv_data.hasOwnProperty("post_author"))(l=wppp_conv_data.post_author.author_firstname+wppp_conv_data.post_author.author_lastname).length||(l=wppp_conv_data.post_author.author_name),u=wppp_conv_data.post_author.author_image,_=wppp_conv_data.post.image,v=wppp_conv_data.post.publish_date,f=wppp_conv_data.article_url;else l=wppp_conv_data.posts_authors&&wppp_conv_data.posts_authors[r].author_firstname&&wppp_conv_data.posts_authors[r].author_lastname?wppp_conv_data.posts_authors[r].author_firstname+" "+wppp_conv_data.posts_authors[r].author_lastname:wppp_conv_data.posts_authors[r].author_name,u=null===(e=wppp_conv_data.posts_authors)||void 0===e?void 0:null===(a=e[r])||void 0===a?void 0:a.author_image,_=null===(n=wppp_conv_data.posts)||void 0===n?void 0:null===(s=n[r])||void 0===s?void 0:s.image,v=null===(i=wppp_conv_data.posts)||void 0===i?void 0:null===(c=i[r])||void 0===c?void 0:c.published_date,f=wppp_conv_data.posts[r].url;return w(f,p,wppp_conv_data.appId,wppp_conv_data.userId,l,u,v,t.title,_,h,!0)}d()},onDefaultVoiceChange:function(e){j(t,"default_voice",e)},onPausesChange:function(e){j(t,"pauses",e)},onRevisionModeChange:function(e){j(t,"is_revision_mode_enabled",e)},onPronunciationsChange:function(e){D(t,e)},userId:t,text:m,ssml:h,voice:p,context:"wp",platform:"wordpress_plugin",title:s,skipToEditor:!0,convertBtnText:"Convert",pauses:_,pronunciations:u,isDraft:!n||"draft"===f.publishStatus,isRevisionModeEnabled:v,narrationStyle:o,containerSelector:".playht-tts-editor-modal-popup"},null),document.getElementById("playht-tts-editor-item")),a.next=48;break;case 46:a.prev=46,a.t4=a.catch(0);case 48:return a.prev=48,e("#playht-edit-draft, #playht-edit-audio, #playht-add-audio").removeAttr("disabled"),playht__swal.closeModal(),a.finish(48);case 52:case"end":return a.stop()}},a,null,[[0,46,48,52],[16,23]])}));return function(t,e){return a.apply(this,arguments)}}())}var N=wppp_conv_data.can_convert;function M(t,a,r,s,i,c,d,l,u){t.each(_asyncToGenerator(regeneratorRuntime.mark(function t(){var h,f,y,g,b,x,k,S,T,C,I,R,A,O,B,j;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,h=this,f=e(this),y=h.value,g=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[y].title:wppp_conv_data.post.title,b="",x="",k="",S="",wppp_conv_data.hasOwnProperty("post_author")?((b=wppp_conv_data.post_author.author_firstname+wppp_conv_data.post_author.author_lastname).length||(b=wppp_conv_data.post_author.author_name),x=wppp_conv_data.post_author.author_image,k=wppp_conv_data.post.image,S=wppp_conv_data.post.publish_date):(b=wppp_conv_data.posts_authors&&wppp_conv_data.posts_authors[u].author_firstname&&wppp_conv_data.posts_authors[u].author_lastname?wppp_conv_data.posts_authors[u].author_firstname+" "+wppp_conv_data.posts_authors[u].author_lastname:wppp_conv_data.posts_authors[u].author_name,x=null===(T=wppp_conv_data.posts_authors)||void 0===T?void 0:null===(C=T[u])||void 0===C?void 0:C.author_image,k=null===(I=wppp_conv_data.posts)||void 0===I?void 0:null===(R=I[u])||void 0===R?void 0:R.image,S=null===(A=wppp_conv_data.posts)||void 0===A?void 0:null===(O=A[u])||void 0===O?void 0:O.published_date),t.t0=i,t.t0){t.next=15;break}return t.next=14,v();case 14:t.t0=t.sent;case 15:i=t.t0,B=e("#wppp_lang_meta option:selected").val(),c=c||e("#wppp_voice_style_meta option:selected").val(),window.__playht__analytics&&__playht__analytics("playht__analytics.send","event","click","add-audio",wppp_conv_data.home_url+h.value),j=f.parentsUntil("tr").parent().find(".has_audio"),E=j,D=l?"Saving draft ...":"Converting ...",void 0,G='<span class="playht-converting"><img class="loading" src="'+wppp_images.settings+'" ><span>'+D+"</span></span>",E.html(G),w(wppp_conv_data.home_url+h.value,i,wppp_conv_data.appId,wppp_conv_data.userId,b,x,S,g,k,s,l).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=5;break}audiospeed="medium",m(i,B,c,h.value,e,s,d,audiospeed).then(function(t){(r+=1)===a&&o(n)}),t.next=13;break;case 5:return t.next=7,p({postId:u,playArticleId:e,voice:i});case 7:if(!wppp_conv_data.hasOwnProperty("posts")){t.next=11;break}P(u,!0,"",[]),t.next=13;break;case 11:return t.next=13,_(u);case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log("processArticlesConversion -> error",t),playht__swal.fire({title:"Uh oh! Something Went Wrong :(",html:"<div class='__play-sw-modal-content'><div>Please try again! Or <span class='btn btn-primary posts-btn js__playht-chat-with-us' style='border-bottom: 1px solid #ddd; cursor: pointer;'>Click here to Contact us</span></div></div>",animation:!1,confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn"})}),t.next=28;break;case 25:t.prev=25,t.t1=t.catch(0),console.log("processArticlesConversion -> error",t.t1);case 28:case"end":return t.stop()}var E,D,G},t,this,[[0,25]])})))}e("body").on("click","#convert_podcast",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(a){var r,s,i,c,d,l,u,h,y,g,b,x,k,C,P,I,R,A,O,B,j,E,D;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(S(-1,1,"Starting the Audio Editor"),r=wp.data?wp.data.select("core/editor"):null,s=wp.data?wp.data.select("core"):null,i=null,c=null,r&&(d=r.getCurrentPost().content,l=e.parseHTML(d),i=l.map(function(t){return f(t)}).map(function(t){return t.trim().replace(/(?:\r\n|\r|\n)/g," ")}).map(function(t){return t.trim()}).filter(Boolean),s))try{u=r.getCurrentPost().author,h=s.getAuthors(),c=h.filter(function(t){return t.id===u})[0]}catch(t){console.log("postAuthorData error",t)}if(window.__playht__analytics&&__playht__analytics("playht__analytics.send","event","click","add-audio",wppp_conv_data.article_url),1!=N){t.next=34;break}return e(".wppp-notice").remove(),t.next=11,v();case 11:return y=t.sent,g=e("#wppp_lang_meta option:selected").val(),b=e("#wppp_voice_style_meta option:selected").val(),x=wppp_conv_data.post_title,k=c?c.name:wppp_conv_data.post_author&&wppp_conv_data.post_author.author_firstname&&wppp_conv_data.post_author.author_lastname?wppp_conv_data.post_author.author_firstname+" "+wppp_conv_data.post_author.author_lastname:wppp_conv_data.post_author.author_name,C=wppp_conv_data.post_id,P=wppp_conv_data.post.play_article_id,t.next=20,G({articleDataId:P,postId:C,narrationStyle:b,voice:y,title:x,postContent:i});case 20:I=t.sent,R=I.articleSSMLContent,A=I.voice,O=I.narrationStyle,B=I.wordsCount,j=I.isDraft,E=I.audiospeed,D=wppp_conv_data.post.published_date,T(e("#podcast-meta-box-id").find(".inside").find(".converting-msg-wrapper"),j?"Saving draft ...":"Converting ..."),w(wppp_conv_data.article_url,A,wppp_conv_data.appId,wppp_conv_data.userId,k,wppp_conv_data.post_author.author_image,D,x,wppp_conv_data.post.image,R,j).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(j){t.next=4;break}m(A,g,O,C,e,R,B,E).then(function(t){o(n,!0)}),t.next=9;break;case 4:return t.next=6,p({postId:C,playArticleId:e,voice:A});case 6:return t.next=8,_(C);case 8:!wppp_conv_data.post||wppp_conv_data.post&&!wppp_conv_data.post.play_article_id?wppp_conv_data.post={play_article_id:e,voice:A}:(wppp_conv_data.post.play_article_id=e,wppp_conv_data.post.voice=y);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){console.log(t),playht__swal.fire({title:"Uh oh! Something Went Wrong :(",html:"<div class='__play-sw-modal-content'><div>Please try again! Or <span class='btn btn-primary posts-btn js__playht-chat-with-us' style='border-bottom: 1px solid #ddd; cursor: pointer;'>Click here to Contact us</span></div></div>",animation:!1,confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn"})}),t.next=36;break;case 34:e(".wrap").prepend('<div class="notice notice-error wppp-notice is-dismissible"> <p>'+N.errors.play[0]+"</p></div>"),playht__swal.fire({imageUrl:wppp_images.cancel,title:"Error!",text:N.errors.play[0],confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn",animation:!1});case 36:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),e(document).on("click","#playht-add-audio",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,r,o,p,s,i,c,d,l,u,_,f,w,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=this).hasAttribute("disabled")){t.next=3;break}return t.abrupt("return");case 3:if(e(a).attr("disabled",!0),1!=N){t.next=51;break}return e(".wppp-notice").remove(),n=e(a).data("postid"),t.next=9,v();case 9:if(r=t.sent,o=e("#wppp_voice_style_meta option:selected").val(),p=e("tr#post-".concat(n)).find('input[type="checkbox"]'),B()){t.next=17;break}return window.__playht__analytics&&__playht__analytics("playht__analytics.send","event","click","no-credits",wppp_conv_data.article_url),playht__swal.fire({imageUrl:wppp_images.no_credits,title:"Sorry, you don't have any words left!",html:"<div class='__play-sw-modal-content'><div>Sorry, we are unable to add audio to your articles because you don’t have enough words left! Please purchase them from the link below and you will be able to add audio to your articles again :)</div><a href='https://play.ht/wordpress/upgrade' target='_blank' class='wppp-modal-ok-btn'>Get More Words</a></div>",animation:!1,showConfirmButton:!1}),a.removeAttribute("disabled"),t.abrupt("return",!1);case 17:return S(-1,1,"Starting the Audio Editor"),t.prev=18,s=null,i=null,t.prev=21,t.next=24,h(n);case 24:s=t.sent,t.next=29;break;case 27:t.prev=27,t.t0=t.catch(21);case 29:return c=s?s.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[n]&&wppp_conv_data.posts[n].play_article_id,d=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[n].title:wppp_conv_data.title,t.next=33,G({articleDataId:c,postId:n,narrationStyle:o,voice:r,title:d,postContent:i});case 33:l=t.sent,u=l.articleSSMLContent,_=l.voice,f=l.narrationStyle,w=l.wordsCount,m=l.isDraft,l.audiospeed,M(p,1,0,u,_,f,w,m,n),t.next=46;break;case 43:t.prev=43,t.t1=t.catch(18),console.log("error",t.t1);case 46:return t.prev=46,a.removeAttribute("disabled"),t.finish(46);case 49:t.next=54;break;case 51:e(".wrap").prepend('<div class="notice notice-error wppp-notice is-dismissible"> <p>'+N.errors.play[0]+"</p></div>"),window.scrollTo(0,0),playht__swal.fire({imageUrl:wppp_images.cancel,title:"Error!",text:N.errors.play[0],confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn",animation:!1});case 54:a.removeAttribute("disabled");case 55:case"end":return t.stop()}},t,this,[[18,43,46,49],[21,27]])}))),e(document).on("click","#playht-edit-draft",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,r,o,p,s,i,c,d,l,u,_,f,w,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=this).hasAttribute("disabled")){t.next=3;break}return t.abrupt("return");case 3:if(e(a).attr("disabled",!0),1!=N){t.next=51;break}if(e(".wppp-notice").remove(),n=e(a).data("postid"),!(wppp_conv_data.posts&&wppp_conv_data.posts[n]&&wppp_conv_data.posts[n].voice)){t.next=11;break}t.t0=wppp_conv_data.posts[n].voice,t.next=14;break;case 11:return t.next=13,v();case 13:t.t0=t.sent;case 14:return r=t.t0,o=e("#wppp_voice_style_meta option:selected").val(),p=e("tr#post-".concat(n)).find('input[type="checkbox"]'),S(-1,1,"Starting the Audio Editor"),t.prev=18,s=null,i=null,t.prev=21,t.next=24,h(n);case 24:s=t.sent,t.next=29;break;case 27:t.prev=27,t.t1=t.catch(21);case 29:return c=s?s.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[n]&&wppp_conv_data.posts[n].play_article_id,d=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[n].title:wppp_conv_data.post_title,t.next=33,G({articleDataId:c,postId:n,narrationStyle:o,voice:r,title:d,postContent:i});case 33:l=t.sent,u=l.articleSSMLContent,_=l.voice,f=l.narrationStyle,w=l.wordsCount,m=l.isDraft,l.audiospeed,M(p,1,0,u,_,f,w,m,n),t.next=46;break;case 43:t.prev=43,t.t2=t.catch(18),console.log("error",t.t2);case 46:return t.prev=46,a.removeAttribute("disabled"),t.finish(46);case 49:t.next=54;break;case 51:e(".wrap").prepend('<div class="notice notice-error wppp-notice is-dismissible"> <p>'+N.errors.play[0]+"</p></div>"),window.scrollTo(0,0),playht__swal.fire({imageUrl:wppp_images.cancel,title:"Error!",text:N.errors.play[0],confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn",animation:!1});case 54:a.removeAttribute("disabled");case 55:case"end":return t.stop()}},t,this,[[18,43,46,49],[21,27]])}))),e(document).on("click","#playht-delete-audio",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e(this).data("postid"),t.next=4,playht__swal.fire({title:"Are you sure you want to delete this Audio?",text:"This action will remove the audio from this post",animation:!1,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"});case 4:if(t.sent.value){t.next=8;break}return playht__swal.closeModal(),t.abrupt("return");case 8:return playht__swal.showLoading(),t.next=11,d({postId:a});case 11:wppp_conv_data.hasOwnProperty("posts")?(I(e("#post-"+a).find(".has_audio"),"No"),C(a,["add"])):_(a),playht__swal.fire("Deleted!","Your Audio has been deleted!","success"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.log("TCL: error",t.t0),playht__swal.fire("Error!","An Error has happened while deleting your Audio","error");case 19:case"end":return t.stop()}},t,this,[[0,15]])}))),e(document).on("click","#playht-retry-audio",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e(this).data("postid"),playht__swal.showLoading(),t.next=5,u({postId:a});case 5:r=t.sent,n[a]=r,e.each(n,function(t,n){if(n){var r=firebase.database().ref("articles").child(n);r.on("value",function(){var o=_asyncToGenerator(regeneratorRuntime.mark(function o(s){var i,c,d,l,u,_,f,w,m,y,g,b,x,k,T,P;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(i=s.val())||!i.error){o.next=45;break}return c=0,d=0,e(".wppp-notice").remove(),o.next=7,v();case 7:if(l=o.sent,u=e("#wppp_voice_style_meta option:selected").val(),_=e("input#cb-select-"+a),_.length,B()){o.next=16;break}return window.__playht__analytics&&__playht__analytics("playht__analytics.send","event","click","no-credits",wppp_conv_data.article_url),playht__swal.fire({imageUrl:wppp_images.no_credits,title:"Sorry, you don't have any words left!",html:"<div class='__play-sw-modal-content'><div>Sorry, we are unable to add audio to your articles because you don’t have enough words left! Please purchase them from the link below and you will be able to add audio to your articles again :)</div><a href='https://play.ht/wordpress/upgrade' target='_blank' class='wppp-modal-ok-btn'>Get More Words</a></div>",animation:!1,showConfirmButton:!1}),o.abrupt("return",!1);case 16:return S(-1,1,"Starting the Audio Editor"),o.prev=17,f=null,w=null,o.prev=20,o.next=23,h(a);case 23:f=o.sent,o.next=28;break;case 26:o.prev=26,o.t0=o.catch(20);case 28:return m=f?f.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[a]&&wppp_conv_data.posts[a].play_article_id,y=wppp_conv_data.posts&&wppp_conv_data.posts[a]&&wppp_conv_data.posts[a].title,o.next=32,G({articleDataId:m,postId:a,narrationStyle:u,voice:l,title:y,postContent:w});case 32:g=o.sent,b=g.articleSSMLContent,x=g.voice,k=g.narrationStyle,T=g.wordsCount,P=g.isDraft,g.audiospeed,M(_,c,d,b,x,k,T,P,a),o.next=45;break;case 42:o.prev=42,o.t1=o.catch(17),console.log("error",o.t1);case 45:i&&i.transcriped&&void 0!==i.transcriptionUrl_mp3&&(r.off("value",p),window.wppp_conv_data&&(wppp_conv_data.post={article_audio:i.transcriptionUrl_mp3,audio_status:2,trans_id:n,voice:i.voice}),e.ajax({type:"POST",url:wppp_conv_data.admin_url,data:{action:"article_converted_success",post_id:t,trans_id:n,audio_url:i.transcriptionUrl_mp3},success:function(a){I(e("#post-"+t).find(".has_audio")),C(t,["edit","delete"]),playht__swal.fire("Retrieved!","Your Audio has been retrieved!","success")}}));case 46:case"end":return o.stop()}},o,null,[[17,42],[20,26]])}));function p(t){return o.apply(this,arguments)}return p}())}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("TCL: error",t.t0),playht__swal.fire("Error!","An Error has happened while retrieving your Audio","error");case 14:case"end":return t.stop()}},t,this,[[0,10]])}))),e(document).on("click","#playht-delete-draft",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,r,o,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e(this).data("postid"),t.next=4,playht__swal.fire({title:"Are you sure you want to delete this Draft?",text:"this action will remove all the audio edits in this Draft.",animation:!1,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"});case 4:if(t.sent.value){t.next=8;break}return playht__swal.closeModal(),t.abrupt("return");case 8:return playht__swal.showLoading(),n=null,t.prev=10,t.next=13,h(a);case 13:n=t.sent,t.next=18;break;case 16:t.prev=16,t.t0=t.catch(10);case 18:return r=n?n.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[a]&&wppp_conv_data.posts[a].play_article_id,o=localStorage.getItem("playht_auth_token"),p=wppp_retrieve.user_id,t.next=23,e.ajax({type:"POST",url:"https://play.ht/api/deleteDraft",data:{token:o,userId:p,articleId:r}});case 23:return t.next=25,s({postId:a});case 25:if(!wppp_conv_data.hasOwnProperty("posts")){t.next=30;break}e("#post-"+a).find(".playht-draft-actions").remove(),e("#post-"+a).find(".column-has_audio").text().includes("Yes")?C(a,["edit","delete"]):(I(e("#post-"+a).find(".has_audio"),"No"),C(a,["add"])),t.next=32;break;case 30:return t.next=32,_(a);case 32:playht__swal.fire("Deleted!","Your Draft has been deleted!","success"),t.next=39;break;case 35:t.prev=35,t.t1=t.catch(0),console.log("TCL: error",t.t1),playht__swal.fire("Error!","An Error has happened while deleting your draft, please try again or use <a target='_blank' href='https://play.ht/app/audio-files'>our dashboard to manage your audio files and drafts!</a>","error");case 39:case"end":return t.stop()}},t,this,[[0,35],[10,16]])}))),e(document).on("click","#playht-edit-audio",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=this).hasAttribute("disabled")){t.next=3;break}return t.abrupt("return");case 3:if(e(a).attr("disabled",!0),1==N){t.next=10;break}return e(".wrap").prepend('<div class="notice notice-error wppp-notice is-dismissible"> <p>'+N.errors.play[0]+"</p></div>"),window.scrollTo(0,0),playht__swal.fire({imageUrl:wppp_images.cancel,title:"Error!",text:N.errors.play[0],confirmButtonText:"Close",confirmButtonClass:"wppp-modal--cancel-btn",animation:!1}),a.removeAttribute("disabled"),t.abrupt("return");case 10:e(".wppp-notice").remove(),n=e(a).data("postid"),r=e("tr#post-".concat(n)).find('input[type="checkbox"]'),playht__swal.fire({title:"Are you sure?",text:"This will remove the existing audio",confirmButtonText:"Yes",confirmButtonClass:"swal2-confirm swal2-styled",cancelButtonText:"No",cancelButtonClass:"swal2-cancel swal2-styled",focusConfirm:!1,focusCancel:!0,showCancelButton:!0,showCloseButton:!0,allowEscapeKey:!0,allowEnterKey:!1,animation:!1}).then(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(o){var p,s,c,l,u,v,f,w,m,y,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.hasOwnProperty("dismiss")){t.next=3;break}return a.removeAttribute("disabled"),t.abrupt("return");case 3:return S(-1,1,"Starting the Audio Editor"),t.prev=4,p=null,s=null,t.prev=7,t.next=10,h(n);case 10:p=t.sent,t.next=15;break;case 13:t.prev=13,t.t0=t.catch(7);case 15:return c=p?p.play_article_id:wppp_conv_data.posts&&wppp_conv_data.posts[n]&&wppp_conv_data.posts[n].play_article_id,l=wppp_conv_data.hasOwnProperty("posts")?wppp_conv_data.posts[n].title:wppp_conv_data.post_title,t.next=19,k(c);case 19:return u=t.sent,t.next=22,b(c);case 22:return v=t.sent,f=v.voice,w=v.narrationStyle,m=v.wordsCount,t.next=28,i(c,n);case 28:return t.next=30,d({postId:n});case 30:return t.next=32,G({articleDataId:c,postId:n,narrationStyle:w,voice:f,title:l,postContent:s});case 32:y=t.sent,g=y.isDraft,wppp_conv_data.hasOwnProperty("posts")?(I(e("#post-"+n).find(".has_audio"),"No"),C(n,["add"])):_(n),M(r,1,0,u,f,w,m,g,n),t.next=41;break;case 38:t.prev=38,t.t1=t.catch(4),console.log("error",t.t1);case 41:return t.prev=41,a.removeAttribute("disabled"),t.finish(41);case 44:case"end":return t.stop()}},t,null,[[4,38,41,44],[7,13]])}));return function(e){return t.apply(this,arguments)}}()),a.removeAttribute("disabled");case 15:case"end":return t.stop()}},t,this)})))})}(window,jQuery);